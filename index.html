<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Game Night | The Dart Room</title>

<style>
:root{
  --bg:#0b1a2e; --text:#eaf2ff; --muted:#b9cbe5;
  --accent:#4ea8ff; --accent2:#a855f7; --accent3:#ffb14e;
  --danger:#ff4d5a; --ok:#2bd576; --shadow: rgba(0,0,0,.25);
  --glass: rgba(255,255,255,.06); --glass2: rgba(255,255,255,.03);
  --border: rgba(255,255,255,.12);
  --glowA: rgba(78,168,255,.35);
  --glowB: rgba(168,85,247,.28);
  --glowC: rgba(255,177,78,.22);
  /* New Arcade Variables */
  --panel: linear-gradient(180deg, #2a2d35 0%, #12141a 100%);
  --btn-red: linear-gradient(180deg, #ff4d5a 0%, #a31d27 100%);
  --btn-green: linear-gradient(180deg, #2bd576 0%, #157a41 100%);
}
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:
    radial-gradient(1000px 650px at 50% 0%, rgba(78,168,255,.55) 0%, rgba(11,26,46,1) 58%),
    radial-gradient(900px 600px at 10% 20%, rgba(168,85,247,.22) 0%, rgba(11,26,46,0) 55%),
    radial-gradient(900px 600px at 90% 35%, rgba(255,177,78,.14) 0%, rgba(11,26,46,0) 60%),
    linear-gradient(180deg,#071423,#050a12);
  color:var(--text);
  overflow-x:hidden;
}
body:before{
  content:""; position:fixed; inset:0; pointer-events:none; z-index:0;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.05'/%3E%3C/svg%3E");
  mix-blend-mode:overlay;
}
.topbar{
  position:sticky;top:0;z-index:10;
  display:flex;align-items:center;justify-content:space-between;gap:12px;
  padding:12px 14px;background:rgba(5,12,22,.78);backdrop-filter:blur(16px);
  border-bottom:1px solid rgba(255,255,255,.10);
  box-shadow:0 10px 30px rgba(0,0,0,.25);
}
.brand{display:flex;flex-direction:column;line-height:1.05}
.brand .t{
  font-weight:1000;font-size:16px; letter-spacing:-.2px;
  text-shadow:0 0 18px var(--glowA), 0 0 22px rgba(168,85,247,.16);
}
.brand .s{font-size:10px;color:var(--muted);text-transform:uppercase;letter-spacing:1px}
.btn{
  border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.08);
  color:var(--text);border-radius:14px;padding:10px 12px;font-weight:900;
  box-shadow:0 8px 18px rgba(0,0,0,.18);
  cursor:pointer;
  transition:transform .12s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease, filter .2s ease;
}
.btn:active{transform:translateY(1px) scale(.985); filter:brightness(1.15)}
.btn.ghost{background:transparent;box-shadow:none;color:var(--muted)}
.btn.ok{
  background:linear-gradient(135deg, rgba(78,168,255,.95), rgba(168,85,247,.65));
  border-color:rgba(255,255,255,.10);
  color:#06101e;
  text-shadow:none;
  box-shadow:0 10px 26px rgba(78,168,255,.18), 0 10px 26px rgba(168,85,247,.12);
}
.btn.danger{background:rgba(255,77,90,.20);border-color:rgba(255,77,90,.35)}
.btn:disabled{opacity:.45;cursor:not-allowed;transform:none;filter:none}

.wrap{max-width:980px;margin:0 auto;padding:14px;position:relative;z-index:1}
.card{
  background:linear-gradient(180deg,var(--glass),var(--glass2));
  border:1px solid rgba(255,255,255,.10);
  border-radius:18px;padding:14px;
  box-shadow:0 14px 30px rgba(0,0,0,.28);
  margin-bottom:12px;
}

/* ARCADE HUD STYLES */
.killer-hud-card {
  background: var(--panel);
  border: 2px solid #3a3f4b;
  border-radius: 12px;
  padding: 10px 15px;
  margin-bottom: 8px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.1), 0 5px 15px rgba(0,0,0,0.5);
}
.killer-hud-card.active {
  border-color: var(--accent);
  box-shadow: 0 0 15px var(--glowA);
}
.killer-hud-left { display: flex; align-items: center; gap: 15px; flex: 1; }
.killer-hud-name { font-weight: 900; font-size: 18px; color: #fff; text-transform: uppercase; min-width: 100px; }
.killer-hud-lives { display: flex; gap: 4px; align-items: center; background: rgba(0,0,0,0.3); padding: 5px 10px; border-radius: 20px; }
.heart { color: var(--danger); font-size: 18px; text-shadow: 0 0 8px var(--danger); }
.heart.empty { color: #333; text-shadow: none; opacity: 0.5; }

.killer-hud-actions { display: flex; gap: 8px; }
.arc-btn-sm {
  padding: 8px 12px; font-size: 12px; font-weight: 900; border-radius: 6px; border: none;
  text-transform: uppercase; color: #fff; cursor: pointer;
  box-shadow: inset 0 2px 0 rgba(255,255,255,0.2), 0 3px 0 #000;
}
.arc-btn-sm:active { transform: translateY(2px); box-shadow: 0 1px 0 #000; }
.arc-btn-sm.red { background: var(--btn-red); }
.arc-btn-sm.green { background: var(--btn-green); }
.arc-btn-sm:disabled { opacity: 0.2; filter: grayscale(1); cursor: not-allowed; }

.h1{font-size:24px;font-weight:1000;margin:2px 0 6px}
.sub{color:var(--muted);font-size:13px}
label{display:block;color:var(--muted);font-size:12px;margin-bottom:6px}
input,select{
  width:100%;
  background:rgba(10,20,35,.65);
  border:1px solid rgba(255,255,255,.14);
  color:var(--text);
  border-radius:14px;padding:12px 12px;font-size:16px;outline:none;
}
.row{display:flex;gap:10px}
.row>*{flex:1}
.stack{display:flex;flex-direction:column;gap:10px}
.toast{
  background:rgba(255,77,90,.12);
  border:1px solid rgba(255,77,90,.30);
  color:#ffd6da;
  border-radius:14px;padding:10px 12px;font-weight:900;margin-bottom:12px;
}
.pill{
  display:inline-block;padding:6px 10px;border-radius:999px;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(78,168,255,.10);
  color:var(--accent);font-weight:900;font-size:12px;
}
.pill.soon{background:rgba(255,255,255,.06); color:var(--muted)}
.divider{height:1px;background:rgba(255,255,255,.10);margin:12px 0}

/* Cinematic */
.logoMark{
  width:44px;height:44px;border-radius:14px;
  background:radial-gradient(60% 60% at 30% 20%, rgba(78,168,255,.40), rgba(255,255,255,.06));
  border:1px solid rgba(255,255,255,.12);
  display:flex;align-items:center;justify-content:center;
  box-shadow:0 12px 28px rgba(0,0,0,.25);
  flex:0 0 auto;
}
.logoMark span{font-size:20px}
.kbd{
  display:inline-block;padding:2px 8px;border-radius:999px;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.06);
  color:var(--muted); font-weight:900; font-size:12px;
}

/* Gradient text */
.gradText{
  background:linear-gradient(90deg, var(--accent), var(--accent2), var(--accent3));
  -webkit-background-clip:text;background-clip:text;color:transparent;
  text-shadow:0 0 18px rgba(78,168,255,.12);
}

/* Game cards */
.gameGrid{display:grid;grid-template-columns:1fr;gap:12px}
@media(min-width:860px){ .gameGrid{grid-template-columns:1fr 1fr;} }
.gameCard{
  background:linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.03));
  border:1px solid rgba(255,255,255,.10);
  border-radius:18px;padding:14px;
  box-shadow:0 10px 26px rgba(0,0,0,.25);
}
.gameHead{display:flex;align-items:center;justify-content:space-between;gap:10px}
.gameTitle{display:flex;align-items:center;gap:10px}
.gameIcon{
  width:38px;height:38px;border-radius:14px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.06);
  display:flex;align-items:center;justify-content:center;
  font-size:18px;
}
.gameMeta{color:var(--muted);font-size:13px;margin-top:4px}
.gameActions{display:flex;gap:10px;margin-top:10px}
.gameActions .btn{flex:1}

/* Roster */
.rosterGrid{display:grid;grid-template-columns:1fr;gap:10px}
@media(min-width:860px){ .rosterGrid{grid-template-columns:1fr 1fr;} }
.rosterCard{
  display:flex;align-items:center;justify-content:space-between;gap:10px;
  padding:12px 12px;border-radius:16px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(255,255,255,.04);
}
.rosterLeft{display:flex;align-items:center;gap:10px}
.avatar{
  width:34px;height:34px;border-radius:14px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(78,168,255,.10);
  display:flex;align-items:center;justify-content:center;
  font-weight:1000;color:var(--accent);
}
.rosterName{font-weight:1000}
.rosterSub{color:var(--muted);font-size:12px;margin-top:2px}

/* Active pulses / glows */
@keyframes pulseSoft{0%{box-shadow:0 0 0 rgba(0,0,0,0)}50%{box-shadow:0 0 26px rgba(78,168,255,.28), 0 0 22px rgba(168,85,247,.18)}100%{box-shadow:0 0 0 rgba(0,0,0,0)}}
.pulseSoft{animation:pulseSoft 1.35s ease-in-out infinite;}
@keyframes pulseTarget{0%{filter:brightness(1)}50%{filter:brightness(1.8)}100%{filter:brightness(1)}}
.pulseTarget{animation:pulseTarget 1.25s ease-in-out infinite;}
@keyframes pulseHot{0%{opacity:.25;filter:brightness(1)}50%{opacity:.95;filter:brightness(2.3)}100%{opacity:.25;filter:brightness(1)}}
.hotWedge{animation:pulseHot .95s ease-in-out infinite;}

/* Play layout: keep everything visible */
.playGrid{ display:grid; grid-template-columns: 1fr; gap:12px; }
@media(min-width:860px){ .playGrid{grid-template-columns: 1.1fr .9fr;} }
.playCardTight{padding:12px}
.boardBox{display:flex;justify-content:center;align-items:center}
.boardBox svg{max-width:100%; height:auto}
.hitRow{display:flex;gap:10px;flex-wrap:wrap}
.hitBtn{
  flex:1; min-width:120px;
  border-radius:14px;border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.08);color:var(--text);
  font-weight:1000;padding:14px;
  box-shadow:0 10px 22px rgba(0,0,0,.18);
  transition:transform .12s ease, filter .15s ease, border-color .2s ease;
}
.hitBtn:active{transform:translateY(1px) scale(.99); filter:brightness(1.15)}
.hitBtn:hover{border-color:rgba(78,168,255,.35)}
.hitBtn.miss{border-color:rgba(255,77,90,.35);background:rgba(255,77,90,.16)}
.hitBtn.undo{border-color:rgba(255,255,255,.18);background:rgba(255,255,255,.05);color:var(--muted)}
table{width:100%;border-collapse:collapse}
th,td{padding:10px 8px;border-bottom:1px solid rgba(255,255,255,.10);vertical-align:top}
th{position:sticky;top:0;background:rgba(10,20,35,.85);backdrop-filter:blur(10px)}
td.l{font-weight:900}
.small{font-size:12px;color:var(--muted);margin-top:4px}
.badge{
  display:inline-block;padding:5px 10px;border-radius:999px;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.06);
  font-size:13px;font-weight:1000;
}
.badge.big{font-size:16px;padding:6px 12px}
.activeCell{outline:2px solid rgba(78,168,255,.45); outline-offset:-2px; border-radius:10px}
.turnName{
  font-size:28px; font-weight:1000; margin:0;
  text-shadow:0 0 22px rgba(78,168,255,.25), 0 0 18px rgba(168,85,247,.18);
}
.turnSub{font-size:14px;color:var(--muted)}
.hudRow{display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap}
.dartDots{display:flex;gap:6px;align-items:center}
.dot{
  width:12px;height:12px;border-radius:999px;
  border:1px solid rgba(255,255,255,.20);
  background:rgba(255,255,255,.06);
  box-shadow:none;
}
.dot.on{
  background:linear-gradient(135deg, rgba(78,168,255,.95), rgba(168,85,247,.55));
  border-color:rgba(255,255,255,.22);
  box-shadow:0 0 18px rgba(78,168,255,.22), 0 0 16px rgba(168,85,247,.16);
}
.statusPill{
  display:inline-flex;align-items:center;gap:8px;
  padding:6px 10px;border-radius:999px;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.06);
  font-weight:1000;font-size:12px;color:var(--muted);
}
.statusPill.killer{
  color:var(--accent3);
  box-shadow:0 0 20px rgba(255,177,78,.18);
  border-color:rgba(255,177,78,.28);
}
.statusPill.vulnerable{
  color:#ffd6da;
  box-shadow:0 0 20px rgba(255,77,90,.18);
  border-color:rgba(255,77,90,.28);
}

/* Collapsible table */
details.accordion{
  border:1px solid rgba(255,255,255,.10);
  border-radius:16px;
  background:rgba(255,255,255,.03);
  overflow:hidden;
}
details.accordion > summary{
  list-style:none; cursor:pointer;
  padding:12px 12px;
  display:flex;align-items:center;justify-content:space-between;gap:10px;
  font-weight:1000;color:var(--text);
}
details.accordion > summary::-webkit-details-marker{display:none}
.accordionBody{
  max-height:260px; overflow:auto;
  border-top:1px solid rgba(255,255,255,.10);
}
</style>
</head>

<body>
<div class="topbar">
  <div class="brand">
    <div class="t" id="brandTitle">Game Night</div>
    <div class="s">The Dart Room ‚Ä¢ Designed by Steve‚Äôs Graphic Designs</div>
  </div>
  <div>
    <button class="btn ghost" id="homeBtn" type="button">Home</button>
    <button class="btn ghost" id="signOutBtn" type="button" style="display:none;">Sign out</button>
  </div>
</div>

<div class="wrap" id="app">
  <div class="card"><div class="h1">Loading‚Ä¶</div><div class="sub">Starting up‚Ä¶</div></div>
</div>

<script>
/* FULL ENGINE RESTORED WITH ARCADE HUD UPGRADE */
function loadScript(src){
  return new Promise((resolve,reject)=>{
    const s=document.createElement("script");
    s.src=src; s.async=true;
    s.onload=resolve;
    s.onerror=()=>reject(new Error("Failed to load: "+src));
    document.head.appendChild(s);
  });
}
function esc(s){ return String(s??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"); }
function normEmail(e){ return String(e??"").trim().toLowerCase(); }
function now(){ return Date.now(); }
function fmt(ts){ try{return new Date(ts).toLocaleString();}catch{return "";} }

const appEl=document.getElementById("app");
const homeBtn=document.getElementById("homeBtn");
const signOutBtn=document.getElementById("signOutBtn");
const brandTitle=document.getElementById("brandTitle");

function showFatal(title,msg){
  appEl.innerHTML=`<div class="card"><h1>${esc(title)}</h1><p>${esc(msg)}</p></div>`;
}

async function boot(){
  try{
    await loadScript("https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js");
    await loadScript("https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js");
    await loadScript("https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js");
    startApp();
  }catch(err){ showFatal("Can‚Äôt start app", err?.message || String(err)); }
}

function startApp(){
  const firebaseConfig = { apiKey: "AIzaSyCY3hTUNNlV6gAofPXY9BVGKb930WYz5RA", authDomain: "gamenightdarts-e7601.firebaseapp.com", projectId: "gamenightdarts-e7601" };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  /* Database Logic */
  async function getPlayers(){ const snap = await db.collection("players").get(); return snap.docs.map(d=>d.data()); }
  async function getStatsDoc(email){ const doc=await db.collection("stats").doc(normEmail(email)).get(); return doc.exists?doc.data():{}; }
  async function saveStatsDoc(email,data){ await db.collection("stats").doc(normEmail(email)).set(data,{merge:true}); }
  async function saveHistoryEntry(entry){ await db.collection("history").add(entry); }

  /* GAME ENGINES */
  const Games=[{id:"shanghai", name:"Shanghai", icon:"üéØ", active:true}, {id:"killer", name:"Killer", icon:"üî•", active:true}];
  const getGame=id=>Games.find(g=>g.id===id)||null;

  /* Shanghai Module (Logic Untouched) */
  const ShanghaiGame=(()=>{
    const TARGETS=[20,19,18,17,16,15,"B"];
    return {
      initMatch: (selectedPlayers)=>({ gameId:"shanghai", players:selectedPlayers.map(p=>({name:p.name,email:p.email,total:0})), turnIndex:0, targetIndex:0, dartInTurn:0, grid:{}, snaps:[], finished:false, startedAt:now() }),
      renderPlay: (ctx)=>`
        <div class="card">
          <div class="row"><button class="btn ghost" id="backToSetup">Back</button></div>
          <div class="h1 gradText">SHANGHAI</div>
          <div class="sub">Round ${ctx.match.targetIndex + 1} | Target: ${TARGETS[ctx.match.targetIndex]}</div>
          <div class="divider"></div>
          <div class="hitRow">
            <button class="hitBtn" onclick="window.doShHit('S')">SINGLE</button>
            <button class="hitBtn" onclick="window.doShHit('D')">DOUBLE</button>
            <button class="hitBtn" onclick="window.doShHit('T')">TRIPLE</button>
            <button class="hitBtn miss" onclick="window.doShHit('M')">MISS</button>
          </div>
        </div>`,
      bindPlay: (ctx)=> { window.doShHit=(h)=> { ctx.match.dartInTurn++; if(ctx.match.dartInTurn>=3){ctx.match.dartInTurn=0;ctx.match.turnIndex=(ctx.match.turnIndex+1)%ctx.match.players.length;} render(); } }
    };
  })();

  /* Killer Module (SURGICAL UPGRADE APPLIED HERE) */
  const KillerGame = (() => {
    const MAX_LIVES = 3;
    return {
      initMatch: (selectedPlayers) => ({
        gameId:"killer", phase:"claim", claimIndex:0, 
        players: selectedPlayers.map(p=>({ name:p.name, email:p.email, number:null, lives:MAX_LIVES, killer:false, out:false })),
        turnIndex:0, dartInTurn:0, finished:false, startedAt:now()
      }),
      renderPlay: (ctx) => {
        const m = ctx.match;
        const active = m.players[m.turnIndex];

        // PHRASE 1: Claiming Numbers
        if(m.phase === "claim"){
           const p = m.players[m.claimIndex];
           return `<div class="card"><div class="h1">Claim Number: ${p.name}</div><input type="number" id="claimN" placeholder="Hit Number"><button class="btn ok" id="saveCl">Save</button></div>`;
        }

        // PHASE 2: Main Play (The Reorganized HUD)
        const playerHUDs = m.players.map((p, idx) => {
           const isActive = m.turnIndex === idx;
           const heartIcons = Array.from({length:MAX_LIVES}, (_,i) => 
             `<span class="heart ${i < p.lives ? '' : 'empty'}">‚ù§</span>`
           ).join('');

           return `
             <div class="killer-hud-card ${isActive ? 'active' : ''}">
               <div class="killer-hud-left">
                 <div class="badge">${p.number ?? '?'}</div>
                 <div class="killer-hud-name">${esc(p.name)}</div>
                 <div class="killer-hud-lives">${heartIcons}</div>
               </div>
               
               <div class="killer-hud-actions">
                 <button class="arc-btn-sm green" data-id="${idx}" data-act="me" ${!isActive || p.out ? 'disabled' : ''}>My Double</button>
                 <button class="arc-btn-sm red" data-id="${idx}" data-act="atk" ${!isActive || !p.killer || p.out ? 'disabled' : ''}>Attack</button>
                 <button class="arc-btn-sm" style="background:#444" data-id="${idx}" data-act="miss" ${!isActive || p.out ? 'disabled' : ''}>Miss</button>
               </div>
             </div>
           `;
        }).join('');

        return `
          <div class="card">
             <div class="row"><button class="btn ghost" id="killBack">Exit</button></div>
             <div class="h1 gradText">THE DART ROOM: KILLER</div>
             <div class="sub">Active Player: <b>${active.name}</b> ${active.killer ? '(KILLER)' : ''}</div>
          </div>
          <div class="wrap">${playerHUDs}</div>
          <div class="card" style="text-align:center">
             <div class="statusPill ${active.killer ? 'killer' : ''}">${active.killer ? 'üî• KILLER MODE ACTIVE' : 'üéØ TARGET YOUR DOUBLE'}</div>
          </div>
        `;
      },
      bindPlay: (ctx) => {
        const m = ctx.match;
        if(document.getElementById("killBack")) document.getElementById("killBack").onclick=()=> { screen="home"; render(); };
        if(document.getElementById("saveCl")) document.getElementById("saveCl").onclick=()=> { 
           m.players[m.claimIndex].number = document.getElementById("claimN").value;
           m.claimIndex++; if(m.claimIndex >= m.players.length) m.phase="play"; render();
        };

        // Click Handler for Arcade HUD
        document.querySelectorAll("[data-act]").forEach(btn => {
          btn.onclick = () => {
            const idx = parseInt(btn.dataset.id);
            const act = btn.dataset.act;
            const p = m.players[idx];

            if(act === "me") { if(!p.killer) p.killer=true; else p.lives = Math.min(MAX_LIVES, p.lives+1); }
            if(act === "atk") { 
               const victimIdx = prompt("Enter opponent number to attack:"); 
               const v = m.players.find(x => x.number == victimIdx);
               if(v && v.email !== p.email) { v.lives--; if(v.lives <=0) v.out=true; }
            }
            
            m.dartInTurn++;
            if(m.dartInTurn >= 3) { 
               m.dartInTurn=0; 
               do { m.turnIndex = (m.turnIndex+1)%m.players.length; } while(m.players[m.turnIndex].out);
            }
            render();
          };
        });
      }
    };
  })();

  /* APP STATE & ROUTING */
  let screen="auth", meUser=null, match=null, activeGameId=null;

  async function render(){
    appEl.innerHTML = "";
    if(screen==="auth") {
      appEl.innerHTML = `<div class="card"><div class="h1">The Dart Room</div><input id="em" placeholder="Email"><button class="btn ok" id="li">Login</button></div>`;
      document.getElementById("li").onclick=async()=>{ meUser={email:document.getElementById("em").value, name:"Steve"}; screen="home"; render(); };
    }
    else if(screen==="home") {
      appEl.innerHTML = `<div class="card"><div class="h1">Welcome, ${meUser.name}</div><button class="btn ok" onclick="window.setG('shanghai')">Play Shanghai</button><button class="btn ok" onclick="window.setG('killer')">Play Killer</button></div>`;
      window.setG=(id)=>{ activeGameId=id; match = (id==="killer"?KillerGame:ShanghaiGame).initMatch([meUser, {name:"Guest", email:"g@g.com"}]); screen="play"; render(); };
    }
    else if(screen==="play") {
      const g = activeGameId==="killer" ? KillerGame : ShanghaiGame;
      appEl.innerHTML = g.renderPlay({match});
      g.bindPlay({match});
    }
  }
  render();
}
boot();
</script>
</body>
</html>
